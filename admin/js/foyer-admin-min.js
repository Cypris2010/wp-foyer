function update_slide_format_meta_boxes(){var e,t;e=jQuery(".postbox[id*=foyer_slide_format_]"),t=jQuery("#foyer_slide_format input[name=slide_format]:checked").val(),e.hide().filter("#foyer_slide_format_"+t).show()}!function($){"use strict";function e(){var t=$(".foyer_slides_editor"),i=$(".foyer_slides_editor_slides");$(".foyer_slides_editor_add_select").unbind("change").change(function(o){var r={action:"foyer_slides_editor_add_slide",channel_id:t.data("channel-id"),slide_id:$(o.currentTarget).val(),nonce:foyer_slides_editor_security.nonce};return $.post(ajaxurl,r,function(t){""!=t&&(i.replaceWith(t),e())}),!1}),$(".foyer_slides_editor_slides_slide_remove").unbind("click").click(function(o){if(confirm(foyer_slides_editor_defaults.confirm_remove_message)){var r={action:"foyer_slides_editor_remove_slide",channel_id:t.data("channel-id"),slide_key:$(o.currentTarget).parents(".foyer_slides_editor_slides_slide").data("slide-key"),nonce:foyer_slides_editor_security.nonce};$.post(ajaxurl,r,function(t){""!=t&&(i.replaceWith(t),e())})}return!1}),i.sortable({revert:100,update:function(o,r){var d=[];$(this).children().each(function(){d[d.length]=$(this).data("slide-id")});var a={action:"foyer_slides_editor_reorder_slides",channel_id:t.data("channel-id"),slide_ids:d,nonce:foyer_slides_editor_security.nonce};$.post(ajaxurl,a,function(t){""!=t&&(i.replaceWith(t),e())})}}),i.disableSelection()}$(function(){e()})}(jQuery),jQuery(function(){update_slide_format_meta_boxes(),jQuery("#foyer_slide_format input[name=slide_format]").on("change",function(){update_slide_format_meta_boxes()})}),jQuery(function(){var e,t;if(wp.media)return t=wp.media.model.settings.post.id,e=foyer_slide_format_default.photo,jQuery("#upload_image_button").on("click",function(i){var o;return i.preventDefault(),o?(o.uploader.uploader.param("post_id",e),void o.open()):(wp.media.model.settings.post.id=e,o=wp.media.frames.file_frame=wp.media({title:foyer_slide_format_default.text_select_photo,button:{text:foyer_slide_format_default.text_use_photo},multiple:!1}),o.on("select",function(){var e;e=o.state().get("selection").first().toJSON(),jQuery("#image-preview").attr("src",e.url).css("width","auto"),jQuery("#image_attachment_id").val(e.id),wp.media.model.settings.post.id=t}),void o.open())}),jQuery("a.add_media").on("click",function(){wp.media.model.settings.post.id=t})});