function update_slide_format_meta_boxes(){var e,i;e=jQuery(".postbox[id*=foyer_slide_format_]"),i=jQuery("#foyer_slide_format input[name=slide_format]:checked").val(),e.hide().filter("#foyer_slide_format_"+i).show()}!function($){"use strict";function e(){var i=$(".foyer_slides_editor"),t=$(".foyer_slides_editor_slides");$(".foyer_slides_editor_add_select").unbind("change").change(function(o){var d=$(o.currentTarget).val();if(d>0){var r={action:"foyer_slides_editor_add_slide",channel_id:i.data("channel-id"),slide_id:d,nonce:foyer_slides_editor_security.nonce};$.post(ajaxurl,r,function(i){""!=i&&(t.replaceWith(i),$(".foyer_slides_editor_add_select").val(""),e())})}return!1}),$(".foyer_slides_editor_slides_slide_remove").unbind("click").click(function(o){if(confirm(foyer_slides_editor_defaults.confirm_remove_message)){var d={action:"foyer_slides_editor_remove_slide",channel_id:i.data("channel-id"),slide_key:$(o.currentTarget).parents(".foyer_slides_editor_slides_slide").data("slide-key"),nonce:foyer_slides_editor_security.nonce};$.post(ajaxurl,d,function(i){""!=i&&(t.replaceWith(i),e())})}return!1}),t.sortable({revert:100,update:function(o,d){var r=[];$(this).children().each(function(){r[r.length]=$(this).data("slide-id")});var a={action:"foyer_slides_editor_reorder_slides",channel_id:i.data("channel-id"),slide_ids:r,nonce:foyer_slides_editor_security.nonce};$.post(ajaxurl,a,function(i){""!=i&&(t.replaceWith(i),e())})}}),t.disableSelection()}$(function(){e()})}(jQuery),jQuery(function(){update_slide_format_meta_boxes(),jQuery("#foyer_slide_format input[name=slide_format]").on("change",function(){update_slide_format_meta_boxes()})}),jQuery(function(){var e,i;if(wp.media)return i=wp.media.model.settings.post.id,e=foyer_slide_format_default.photo,jQuery("#upload_image_button").on("click",function(t){var o;return t.preventDefault(),o?(o.uploader.uploader.param("post_id",e),void o.open()):(wp.media.model.settings.post.id=e,o=wp.media.frames.file_frame=wp.media({title:foyer_slide_format_default.text_select_photo,button:{text:foyer_slide_format_default.text_use_photo},multiple:!1}),o.on("select",function(){var e;e=o.state().get("selection").first().toJSON(),jQuery("#image-preview").attr("src",e.url).css("width","auto"),jQuery("#image_attachment_id").val(e.id),wp.media.model.settings.post.id=i}),void o.open())}),jQuery("a.add_media").on("click",function(){wp.media.model.settings.post.id=i})});